generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
  relationMode = "prisma"
}

model Department {
  id    Int     @id @default(autoincrement())
  name  String  @unique(map: "DepartmentName")
  nurse Nurse[] // OneToMany Relationship (Department has many Nurses)
}

//Users models
model Nurse {
  id         Int         @id @default(autoincrement())
  patients   Patient[] // OneToMany Relationship (Nurse has many Paitents)
  department Department? @relation(fields: [depID], references: [id], onDelete: Cascade, onUpdate: Cascade)
  depID      Int?
  createdAt  DateTime    @default(now())
  nationalID BigInt         @unique(map: "nationalID") @db.BigInt
  email      String?     @unique(map: "UserMail")
  phone      BigInt?        @unique(map: "UserPhone") @db.BigInt
  name       String?

  @@index([depID])
}

model Patient {
  id         Int      @id @default(autoincrement())
  nurse      Nurse?   @relation(fields: [nurseID], references: [id], onDelete: Cascade, onUpdate: Cascade)
  nurseID    Int?
  createdAt  DateTime @default(now())
  nationalID BigInt      @unique(map: "nationalID") @db.BigInt
  email      String?  @unique(map: "UserMail")
  phone      BigInt?     @unique(map: "UserPhone") @db.BigInt
  name       String?

  @@index([nurseID])
}
